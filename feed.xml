<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.6">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2019-09-10T12:51:34-07:00</updated><id>/feed.xml</id><title type="html">yokolet’s notelets</title><subtitle>Notes about programming</subtitle><entry><title type="html">Complete Binary Tree</title><link href="/2019/09/09/complete-binary-tree.html" rel="alternate" type="text/html" title="Complete Binary Tree" /><published>2019-09-09T21:19:00-07:00</published><updated>2019-09-09T21:19:00-07:00</updated><id>/2019/09/09/complete-binary-tree</id><content type="html" xml:base="/2019/09/09/complete-binary-tree.html">&lt;h4 id=&quot;what-is-complete-binary-tree&quot;&gt;What is &lt;strong&gt;Complete Binary Tree&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;Problems which ask a binary tree traverse, add/delete nodes, etc. are popular in algorithm questions.
The binary trees are often just a binary tree or binary search tree.
Sometimes, the problem pinpoints a particular type of a binary tree,
for example, a balanced binary tree or complete binary tree.&lt;/p&gt;

&lt;p&gt;The complete binary tree has unique properties.
Problems which specify the tree as the complete binary tree expect an efficient
solution based on the tree’s properties.
I found it is an interesting topic, so I decided to write a post about the complete binary tree.&lt;/p&gt;

&lt;p&gt;Well, what is exactly the complete binary tree?
Wikipedia’s article about &lt;a href=&quot;https://en.wikipedia.org/wiki/Binary_tree&quot;&gt;Binary Tree&lt;/a&gt; explains that:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;In a complete binary tree every level, except possibly the last,
is completely filled, and all nodes in the last level are as far left
as possible. It can have between 1 and 2^h nodes at the last level h.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Given the above definition, in every level, nodes are filled out strictly from left to right.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;complete binary tree      not complete binary tree
    1                              1
   / \                            / \
  2   3                          2   3
 /                                \
4                                  4

      1                            1
    /   \                        /  \ 
  2      3                      2    3
 / \    /                      /    / \ 
4   5  6                      4    5   6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the complete binary tree, it’s easy to store the tree in an array.
For example, the second complete binary tree above can be expressed by
&lt;code class=&quot;highlighter-rouge&quot;&gt;[1, 2, 3, 4, 5, 6]&lt;/code&gt;.
This would remind a heap data structure. In fact, the heap is the complete binary tree.&lt;/p&gt;

&lt;p&gt;Another interesting property is the left and right subtree’s heights.
The left subtree is always higher or equal to the right subtree.
When the right subtree exists the left subtree should be completely filled.&lt;/p&gt;

&lt;p&gt;For now, we learned the completed binary tree’s properties, it’s time to look at algorithm problems.&lt;/p&gt;

&lt;h4 id=&quot;counting-nodes-in-the-complete-binary-tree&quot;&gt;Counting Nodes in the Complete Binary Tree&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Problem description&lt;/strong&gt;: Given a complete binary tree, find how many nodes are in the tree.&lt;/p&gt;

&lt;p&gt;A naive solution is obvious – traverse the tree whether level order or pre-order.
The correct answer will be found.
However, when the tree type is specified as the complete binary tree, there’s no need to traverse all.
The solution should use the complete binary tree property that nodes are packed to the left.&lt;/p&gt;

&lt;p&gt;This is the problem to compare left and right subtree heights.
At some level, if the right subtree has the same height as the left subtree, that level is all filled.
For example, the second complete binary tree above has the same left and right subtree heights at the level of node 2 and 3.
That means the left subtree is completely filled, so the next step goes to the right subtree to check.
If the left subtree is higher at some level as described in the first complete binary tree,
the next step goes left to check.&lt;/p&gt;

&lt;p&gt;Below is the code example of counting problem. It takes a bottom up counting style.&lt;/p&gt;

&lt;h4 id=&quot;code-example-of-node-count&quot;&gt;Code Example of Node Count&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class TreeNode {
    int val;
    TreeNode left;
    TreeNode right;
    TreeNode(int x) { val = x; }
}

public class CBTNodeCount {
    private int getHeight(TreeNode root) {
        if (root == null) { return 0; }
        return 1 + getHeight(root.left);
    }

    public int countNodes(TreeNode root) {
        if (root == null) { return 0; }
        int left = getHeight(root.left);
        int right = getHeight(root.right);
        if (left == right) {
            return (int)Math.pow(2, left) + countNodes(root.right);
        } else {
            return (int)Math.pow(2, right) + countNodes(root.left);
        }
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/64781fb9082954396c34272dd94ae705.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The performance is: time &lt;code class=&quot;highlighter-rouge&quot;&gt;O(log(n))&lt;/code&gt;, space &lt;code class=&quot;highlighter-rouge&quot;&gt;O(h)&lt;/code&gt;, where n: number of nodes, h: height of the tree.&lt;/p&gt;

&lt;h4 id=&quot;validating-a-completeness-of-binary-tree&quot;&gt;Validating a Completeness of Binary Tree&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Problem description&lt;/strong&gt;: Given a binary tree, check if it is a complete binary tree.&lt;/p&gt;

&lt;p&gt;Like counting problem, left and right subtree’s heights are a clue to find an answer.
If the right subtree is higher as in the first not complete binary tree, it is invalid.
If the left subtree if higher more than one, it is invalid.
When left min and max heights are not the same, the right min/max should be the same as the left min.&lt;/p&gt;

&lt;p&gt;Below is the code example of validation problem. It takes post-order traversal style.&lt;/p&gt;

&lt;h4 id=&quot;code-example-of-completeness-check&quot;&gt;Code Example of Completeness check&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class CBTCheck {
    private int[] walk(TreeNode root) {
        if (root == null) { return new int[]{0, 0, 1}; } // min, max, valid
        int[] left = walk(root.left);
        int[] right = walk(root.right);
        int valid = left[2] &amp;amp; right[2];
        if (right[1] &amp;gt; left[1]) {
            valid = 0;
        } else if (right[1] + 1 &amp;lt; left[1]) {
            valid = 0;
        } else if (left[0] != left[1] &amp;amp;&amp;amp; (right[0] != right[1] || right[1] != left[0])) {
            valid = 0;
        }
        return new int[]{1 + Math.min(left[0], right[0]), 1 + Math.max(left[1], right[1]), valid};
    }

    public boolean isCompleteTree(TreeNode root) {
        int[] result = walk(root);
        return result[2] == 1 ? true : false;
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/e66a00ad3d523577a515e403d26581a1.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The performance is: time &lt;code class=&quot;highlighter-rouge&quot;&gt;O(n)&lt;/code&gt;, space &lt;code class=&quot;highlighter-rouge&quot;&gt;O(h)&lt;/code&gt;, where n: number of nodes, h: height of the tree.&lt;/p&gt;

&lt;h4 id=&quot;designing-a-complete-binary-tree-inserter&quot;&gt;Designing a Complete Binary Tree Inserter&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Problem description&lt;/strong&gt;: Write a data structure &lt;code class=&quot;highlighter-rouge&quot;&gt;CBTInserter&lt;/code&gt; which is initialized by a
complete binary tree and provides operations below:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CBTInserter(TreeNode root)&lt;/code&gt;: initializes the data structure with the root of the complete binary tree&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;insert(int v)&lt;/code&gt;: inserts a new node with the value &lt;code class=&quot;highlighter-rouge&quot;&gt;v&lt;/code&gt; to the tree and returns the value of the parent node. After the insertion, the tree should keep the completeness.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;get_root()&lt;/code&gt;: returns the root node of the tree.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is a problem to use heap-like data structure internally.
Under a zero based index, left and right children are on the index of &lt;code class=&quot;highlighter-rouge&quot;&gt;2*i+1&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;2*i+2&lt;/code&gt; respectively
when the parent node is at index &lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;.
When the child is on the index &lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;, its parent is at index &lt;code class=&quot;highlighter-rouge&quot;&gt;(i-1) / 2&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When the class is initialized, the given tree will be saved in an array using level order traversal.
When a new node is inserted, the parent’s index is easily found from the array length.
So the new node can be added to its parent’s left or right child easily.&lt;/p&gt;

&lt;h4 id=&quot;code-example-of-complete-binary-tree-inserter&quot;&gt;Code Example of Complete Binary Tree Inserter&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public class CBTInserter {
    private TreeNode root = null;
    private List&amp;lt;TreeNode&amp;gt; memo = new ArrayList&amp;lt;&amp;gt;();

    public CBTInserter(TreeNode root) {
        this.root = root;
        LinkedList&amp;lt;TreeNode&amp;gt; queue = new LinkedList&amp;lt;&amp;gt;();
        queue.offer(root);
        while (!queue.isEmpty()) {
            TreeNode cur = queue.poll();
            this.memo.add(cur);
            if (cur.left != null) {
                queue.offer(cur.left);
            }
            if (cur.right != null) {
                queue.offer(cur.right);
            }
        }
    }

    public int insert(int v) {
        int n = this.memo.size();
        TreeNode p = this.memo.get((n - 1)/2);
        if (n % 2 == 1) {
            p.left = new TreeNode(v);
            this.memo.add(p.left);
        } else {
            p.right = new TreeNode(v);
            this.memo.add(p.right);
        }
        return p.val;
    }

    public TreeNode get_root() {
        return this.root;
    }
}
&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/afa881446150ce323492d31d30738f4d.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The performance is:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;initialization: time: &lt;code class=&quot;highlighter-rouge&quot;&gt;O(n)&lt;/code&gt;, space: &lt;code class=&quot;highlighter-rouge&quot;&gt;O(n)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;insert: time &lt;code class=&quot;highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;, space: &lt;code class=&quot;highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;get_root: time &lt;code class=&quot;highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;, space: &lt;code class=&quot;highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ressources&quot;&gt;Ressources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Wikipedia: &lt;a href=&quot;https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees&quot;&gt;Types of Binary Tree&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cs.cmu.edu/~adamchik/15-121/lectures/Binary%20Heaps/heaps.html&quot;&gt;Binary Heaps&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">What is Complete Binary Tree</summary></entry><entry><title type="html">Catalan number</title><link href="/2019/09/08/catalan-number.html" rel="alternate" type="text/html" title="Catalan number" /><published>2019-09-08T12:41:00-07:00</published><updated>2019-09-08T12:41:00-07:00</updated><id>/2019/09/08/catalan-number</id><content type="html" xml:base="/2019/09/08/catalan-number.html">&lt;h4 id=&quot;what-is-catalan-number&quot;&gt;What is &lt;strong&gt;Catalan number&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;The Catalan number belongs to the domain of combinatorial mathematics.
It is a sequence of natural numbers such that:
&lt;code class=&quot;highlighter-rouge&quot;&gt;1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670, 129644790, 477638700, 1767263190, ...&lt;/code&gt;
The sequence appears in counting problems.
Wikipedia has the details about the sequence: &lt;a href=&quot;https://en.wikipedia.org/wiki/Catalan_number&quot;&gt;Catalan Number&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The algorithm of the Catalan number calculation is not difficult.
Once the problem is identified as the Catalan number,
the solution will come up relatively easy.
However, something not easy is to identify it is the Catalan number problem.&lt;/p&gt;

&lt;h4 id=&quot;various-types-of-counting-problems&quot;&gt;Various types of counting problems&lt;/h4&gt;

&lt;p&gt;The Wikipedia article mentions various types of counting problems which are solved by the Catalan number.
One more great resource is “Catalan Numbers” (&lt;a href=&quot;http://www.geometer.org/mathcircles/catalan.pdf&quot;&gt;http://www.geometer.org/mathcircles/catalan.pdf&lt;/a&gt;).
The document refers to multiple counting problems as well as how to solve those.
For a reference, it’s worth writing a memo what kind of problems are out there.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Balanced parentheses&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; pairs of parentheses, how many patterns exist to create
 valid (balanced) combinations of parentheses.&lt;/p&gt;

    &lt;p&gt;Example:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       *
 1  1       ()
 2  2       (()) ()()
 3  5       ((())) ()(()) ()()() (())() (()())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Note: This is a basic pattern of the Catalan number.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Dyck words&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;, how many patterns exist to create words of n Xs and n Ys such that
 in every prefix of the word frequency(‘X’) ≥ frequency(‘Y’)&lt;/p&gt;

    &lt;p&gt;Example:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       *
 1  1       XY
 2  2       XXYY XYXY
 3  5       XXXYYY XYXXYY XYXYXY XXYYXY XXYXYY
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Note: If X and Y are mapped ( and ) respectively, the problem is the same as
 the balanced parentheses.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Mountain Ranges&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; pairs of sticks, how many patterns exist to create mountains.&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       *
 1  1       /\
 2  2       /\
           /  \  /\/\
 3  5        /\
            /  \     /\             /\      /\/\
           /    \  /\/  \  /\/\/\  /  \/\  /    \
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Note: If / and \ are mapped to ( and ) respectively, the problem is the same as
 the balanced parentheses.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Binary Search Trees&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;, how many unique binary search tress exist to create node value &lt;code class=&quot;highlighter-rouge&quot;&gt;1 to n&lt;/code&gt;.&lt;/p&gt;

    &lt;p&gt;Example:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       *
 1  1       1
 2  2         2  1
             /    \
            1      2
 3  5           3    3     2    1    1
               /    /     / \    \    \
             2    1     1   3    3    2
            /      \            /      \
           1        2          2        3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Diagonal Paths&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n x n&lt;/code&gt; grid, how many paths of length &lt;code class=&quot;highlighter-rouge&quot;&gt;2n&lt;/code&gt; exist from bottom left to upper right corner.&lt;/p&gt;

    &lt;p&gt;Example:&lt;/p&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       *
 1  1        ↑
            →
 2  2         ↑       ↑
              ↑    ↑ →
           → →    →
 3  5           ↑        ↑         ↑        ↑          ↑
                ↑        ↑      ↑ →      ↑ →           ↑
                ↑   ↑ → →    ↑ →         ↑         ↑ →
           → → →   →        →         → →      → →
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;Note: If → and ↑ are mapped to ( and ), the problem is the same as the
 balanced parentheses.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Multiplication orderings&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n+1&lt;/code&gt; numbers to multiply together, how many patterns exist to make multiplication
 precedences without changing the order of numbers.&lt;/p&gt;

    &lt;p&gt;Example:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; n  counts  patterns
 0  1       (a)
 1  1       (ab)
 2  2       ((ab)c) (a(bc))
 3  5       (((ab)c)d) ((ab)(cd)) ((a(bc))d) (a((bc)d)) (a(b(cd)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Polygon Triangulation&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;n+2&lt;/code&gt; sides of convex polygon, how many patterns exist to cut into
 triangles of non-crossing line segments.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Handshaking&lt;/p&gt;

    &lt;p&gt;Problem: Given &lt;code class=&quot;highlighter-rouge&quot;&gt;2n&lt;/code&gt; people seated around the round table, how many patterns exists to
 shake hands without crossing arms.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;code-example&quot;&gt;Code Example&lt;/h4&gt;

&lt;p&gt;For all problems above, the number of patterns can be found the code below:&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;public class CatalanNumbers {
    public int numPatterns(int n) {
        double count = 1.0;
        for (double i = 1.0; i &amp;lt;= n; i += 1.0) {
            count *= ((i + n) / i);
        }
        return (int) Math.round(count / (n + 1));
    }

    public int numPatternsDP(int n) {
        long[] memo = new long[n+1];
        memo[0] = memo[1] = 1;
        for (int i = 2; i &amp;lt;= n; i++) {
            memo[i] = 0;
            for (int j = 0; j &amp;lt; i; j++) {
                memo[i] += memo[j] * memo[i-j-1];
            }
        }
        return (int)memo[n];
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/f33be1919df2015a172fd3c80f89aaef.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The first &lt;code class=&quot;highlighter-rouge&quot;&gt;numPatterns&lt;/code&gt; method runs faster if the problem asks only one number such as:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;leetcode: &lt;a href=&quot;https://leetcode.com/problems/unique-binary-search-trees/&quot;&gt;Unique Binary Search Trees&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;topcoder: &lt;a href=&quot;https://community.topcoder.com/stat?c=problem_statement&amp;amp;pm=7868&amp;amp;rd=10777&quot;&gt;Hands Shaking&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;However, when problem asks accumulation of patterns such as:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;HackerRank: &lt;a href=&quot;https://www.hackerrank.com/contests/walmart-codesprint-algo/challenges/popsicle-stick-mountains&quot;&gt;Popsicle Stick Mountains&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;the second DP solution works to avoid repetition.&lt;/p&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;Wikipedia: &lt;a href=&quot;https://en.wikipedia.org/wiki/Catalan_number&quot;&gt;Catalan number&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Tom Davis: &lt;a href=&quot;http://www.geometer.org/mathcircles/catalan.pdf&quot;&gt;Catalan Numbers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;GeeksforGeeks: &lt;a href=&quot;https://www.geeksforgeeks.org/program-nth-catalan-number/&quot;&gt;Program for nth Catalan Number&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">What is Catalan number</summary></entry><entry><title type="html">Prime Check of a Big Number</title><link href="/2019/09/04/prime-check-of-a-big-number.html" rel="alternate" type="text/html" title="Prime Check of a Big Number" /><published>2019-09-04T21:05:00-07:00</published><updated>2019-09-04T21:05:00-07:00</updated><id>/2019/09/04/prime-check-of-a-big-number</id><content type="html" xml:base="/2019/09/04/prime-check-of-a-big-number.html">&lt;h4 id=&quot;the-problem&quot;&gt;The Problem&lt;/h4&gt;

&lt;p&gt;“Given an integer &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;, find whether &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; is a prime number or not” – This is a typical
algorithm question.
If the given number is small, repeating a division from 2 to &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; gives the answer.&lt;/p&gt;

&lt;p&gt;A better solution would be to stop looping at square root of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;.
Suppose the given number &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; is not a prime number (composite number), the &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; has
two numbers &lt;code class=&quot;highlighter-rouge&quot;&gt;a, b&lt;/code&gt; where &lt;code class=&quot;highlighter-rouge&quot;&gt;n = ab&lt;/code&gt;.
From the equation, both &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;b&lt;/code&gt; should be equal to or less than square root of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;.
So, if the factor of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; exists, the factor should be the equal to or less than square root of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;.
Checking the number up to square root of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; is enough to find &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; is prime or not.&lt;/p&gt;

&lt;p&gt;However, looping over up to square root of &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; runs slow still once the given number becomes bigger.
Well-known faster algorithm is the Sieve of Eratosthenes (&lt;a href=&quot;https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes&quot;&gt;Wikipedia&lt;/a&gt;).
The algorithm starts from a boolean array of size n initialized by &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; value.
The iteration goes from 2 to n while crossing out all multiples of 2, then 3, 5, … (set &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt; to all multiples of 2, 3, 5…).
In the end, if the last array element is true, the given number &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; is confirmed the prime number.&lt;/p&gt;

&lt;p&gt;The problem of the Sieve of Eratosthenes is a memory consumption.
HackerRank problem has teasing test cases of &lt;code class=&quot;highlighter-rouge&quot;&gt;100000003&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;1000000007&lt;/code&gt;.
Those numbers easily cause memory out of error.
The naive looping approach ends up in a timeout failure.&lt;/p&gt;

&lt;h4 id=&quot;combination-of-sieve-and-looping&quot;&gt;Combination of Sieve and Looping&lt;/h4&gt;

&lt;p&gt;There should be plenty of solutions to find a given big number is a prime or not.
What came up in my mind is a combination of the sieve and looping over.
The first step is to find all prime numbers up to square root of the given number using the sieve.
The second step is to loop over the division by prime numbers found in the first step.
This solution has the time complexity of O(square root of n), which made all HackerRank test cases pass.
The solution would be a good entry here as my memo.&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.*;

public class PrimeNumber {

    private List&amp;lt;Integer&amp;gt; sieve(int m) {
        List&amp;lt;Integer&amp;gt; p = new ArrayList&amp;lt;Integer&amp;gt;();
        if (m &amp;lt;= 1) { return p; }
        boolean[] ary = new boolean[m+1];
        Arrays.fill(ary, 2, m+1, true);
        for (int i = 2; i &amp;lt;= m; i++) {
            if (ary[i]) {
                p.add(i);
                for (int j = i * 2; j &amp;lt;= m; j += i) {
                    ary[j] = false;
                }
            }
        }
        return p;
    }

    private boolean checkPrime(int n, List&amp;lt;Integer&amp;gt; p) {
        if (p.size() == 0) { return true; }
        for (int i = p.size()-1; i &amp;gt;= 0; i--) {
            if (n % p.get(i) == 0) { return false; }
        }
        return true;
    }
    
    public String isPrime(int n) {
        if (n &amp;lt;= 1) { return &amp;quot;Not prime&amp;quot;; }
        int m = (int)Math.sqrt(n);
        List&amp;lt;Integer&amp;gt; primes = sieve(m);
        return checkPrime(n, primes) ? &amp;quot;Prime&amp;quot; : &amp;quot;Not prime&amp;quot;;
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/6a16de49404c7306019b052cdb7b9401.js&quot;&gt; &lt;/script&gt;</content><author><name></name></author><summary type="html">The Problem</summary></entry><entry><title type="html">HackerRank Code Testing by Clojure</title><link href="/2019/08/28/hackerank-code-testing-by-clojure.html" rel="alternate" type="text/html" title="HackerRank Code Testing by Clojure" /><published>2019-08-28T16:20:00-07:00</published><updated>2019-08-28T16:20:00-07:00</updated><id>/2019/08/28/hackerank-code-testing-by-clojure</id><content type="html" xml:base="/2019/08/28/hackerank-code-testing-by-clojure.html">&lt;h4 id=&quot;hackerrank-code-testing-by-clojure&quot;&gt;HackerRank Code Testing by Clojure&lt;/h4&gt;

&lt;p&gt;Recently, I decided to give Clojure a try.
I used to write Clojure code for my day job, however, no Clojure at all for two years.
Instead, almost all were done by Python.
I became familiar with Python’s functional programming world now.
Aside of ML/DL projects, I did bunch at HackerRank, leetcode or sort.
After a while, I thought, “maybe I can solve problems by Clojure like Python…”&lt;/p&gt;

&lt;p&gt;Luckily, HackerRank supports Clojure. So, I started.&lt;/p&gt;

&lt;p&gt;Soon, I hit the wall. I wanted to test a code. Okay, writing test is not hard.
Something quite hard was the HackerRank platform.
Test data comes in from &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt;. Something output to &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOUT&lt;/code&gt; is tested.
For many problems, it’s effective to have &lt;code class=&quot;highlighter-rouge&quot;&gt;read-line&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;println&lt;/code&gt; in the code side.&lt;/p&gt;

&lt;p&gt;I did quite a lot of research and trials so that the code can be tested
without any modification on HackerRank platform.
This experience, setting up a testing environment was a good Clojure study.
That’s why I wrote the blog post.
This post may help other Clojure newbies to figure out how.&lt;/p&gt;

&lt;h4 id=&quot;binding-stdin&quot;&gt;Binding &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Clojure has &lt;a href=&quot;https://clojuredocs.org/clojure.core/binding&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;clojure.core/binding&lt;/code&gt;&lt;/a&gt; function.
This function is used to create new bindings, which is like, replacing the current bindings.
In Clojure, &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt; is bind to &lt;code class=&quot;highlighter-rouge&quot;&gt;*in*&lt;/code&gt;.
So, what should be done is to bind &lt;code class=&quot;highlighter-rouge&quot;&gt;*in*&lt;/code&gt; to something else.&lt;/p&gt;

&lt;p&gt;Next question is what should be “something else.”&lt;/p&gt;

&lt;p&gt;HackerRank test case is provided by a file.
People can get the test data file if they pay 5 Hackos.
The “Hackos” are points people can get when their solutions successfully pass all tests.
Unless the problem is a very entry level, the test case file tends to pretty big.
It’s unable to write the test data in the code often.
For this reason, I wanted to get the test data from a file and bind it to &lt;code class=&quot;highlighter-rouge&quot;&gt;*in*&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What I did was:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;create a file under &lt;code class=&quot;highlighter-rouge&quot;&gt;resource&lt;/code&gt; directory&lt;/li&gt;
  &lt;li&gt;read it as a resource&lt;/li&gt;
  &lt;li&gt;convert it to a reader&lt;/li&gt;
  &lt;li&gt;bind the reader to &lt;code class=&quot;highlighter-rouge&quot;&gt;*in*&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clojure.java.io&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:as&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;with-open&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdr&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;io/reader&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;io/resource&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;*in*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since the project was created by the &lt;a href=&quot;https://leiningen.org/&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;leningen&lt;/code&gt;&lt;/a&gt;,
the &lt;code class=&quot;highlighter-rouge&quot;&gt;resources&lt;/code&gt; directory is already on the path. Just to give a relative file path
as &lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt;, the file is read. The &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt; is a function which consumes data from &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&quot;catching-stdout&quot;&gt;Catching &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOUT&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Now, reading from &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt; was cleared. Next will be to catch &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOUT&lt;/code&gt;.
Clojure has a convenient function &lt;a href=&quot;https://clojuredocs.org/clojure.core/with-out-str&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;clojure.core/with-out-str&lt;/code&gt;&lt;/a&gt;.
Compared to a reading part, catching &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOU&lt;/code&gt; was much easier.
For example:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;;; define function which prints to stdout&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;say-it&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;seriously?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;can't believe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; assign STDOUT to &quot;out&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;with-out-str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;say-it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; what's in the &quot;out&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;seriously?\ncan't believe\n&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same idea for the reading can be applied to &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOUT&lt;/code&gt; – printing out to a file under &lt;code class=&quot;highlighter-rouge&quot;&gt;resources&lt;/code&gt; directory.
However, in general, the expected output is simple for the HackerRank problems.
At this moment, &lt;code class=&quot;highlighter-rouge&quot;&gt;with-out-str&lt;/code&gt; function satisfies my needs.&lt;/p&gt;

&lt;h4 id=&quot;wrapping-tests&quot;&gt;Wrapping Tests&lt;/h4&gt;

&lt;p&gt;So far, &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;STDOUT&lt;/code&gt; work well to fit with the HackerRank platform.
However, to bind resource reader to &lt;code class=&quot;highlighter-rouge&quot;&gt;STDIN&lt;/code&gt;, I should write &lt;code class=&quot;highlighter-rouge&quot;&gt;with-open ...&lt;/code&gt; in every test case. 
I want to avoid writing the same lines again and again.
After searching online, I found &lt;a href=&quot;https://clojuredocs.org/clojure.test/use-fixtures&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;clojure.test/use-fixtures&lt;/code&gt;&lt;/a&gt; function.
This function works like Unit test’s &lt;code class=&quot;highlighter-rouge&quot;&gt;setUp()/tearDown()&lt;/code&gt; methods.
As the Clojure API document explains:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my-test-fixture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create-db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;   &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; setUp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;           &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; test&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;destroy-db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; tearDown&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;use-fixtures&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:once&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my-test-fixture&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Define the fixture function, then call &lt;code class=&quot;highlighter-rouge&quot;&gt;use-fixture&lt;/code&gt; function.
The tests in the same namespace are all wrapped by the fixture.&lt;/p&gt;

&lt;p&gt;Below is an example test by the &lt;code class=&quot;highlighter-rouge&quot;&gt;use-fixture&lt;/code&gt; function.&lt;/p&gt;

&lt;noscript&gt;&lt;pre&gt;;; A solution and test code for https://www.hackerrank.com/challenges/30-dictionaries-and-maps/problem

;; test/thirty-days-code.core_test.clj
(ns thirty-days-code.core-test
  (:require [clojure.java.io :as io]
            [clojure.test :refer :all]))

(defn wrap-test [n f]
  (with-open [rdr (io/reader (io/resource n))]
    (binding [*in* rdr]
      (f))))

;; test/thirty_days_code.phone_number_test.clj
(ns thirty-days-code.phone-number-test
  (:require [clojure.test :refer :all]
            [thirty-days-code.core-test :as core-test]
            [thirty-days-code.phone-number :refer :all]))

(defn phone-number-test-fixture [f]
  (core-test/wrap-test &amp;quot;test-data/phone-number.txt&amp;quot; f))
(use-fixtures :once phone-number-test-fixture)

(def expected &amp;quot;sam=99912222\nNot found\nharry=12299933\n&amp;quot;)
(deftest phone-number-test
  (testing &amp;quot;given a name should find a phone number&amp;quot;
    (let [result (with-out-str (phone-number))]
      (is (= expected result)))))

;; solution
;; src/thirty_days_code.phone_number.clj
(ns thirty-days-code.phone-number)

(defn phone-number []
  (let [n (Integer/parseInt (clojure.string/trim (read-line)))
        book (reduce (fn [acc line]
                       (let [l (clojure.string/trim line)
                             [k v] (clojure.string/split l #&amp;quot;\s+&amp;quot;)]
                         (assoc acc k (str k &amp;quot;=&amp;quot; v))))
                     {}
                     (repeatedly n #(read-line)))]
    (doseq [q (line-seq (java.io.BufferedReader. *in*))]
      (println (get book q &amp;quot;Not found&amp;quot;)))))&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/efad0031c483bcc77ea9ada37e708db2.js&quot;&gt; &lt;/script&gt;

&lt;h4 id=&quot;gotchas&quot;&gt;Gotchas&lt;/h4&gt;

&lt;p&gt;The function &lt;code class=&quot;highlighter-rouge&quot;&gt;use-fixture&lt;/code&gt; made my test code simple. It’s good.
However, it has a downside.
Some problems provide multiple test cases, which means multiple resource files on my test environment.
Since only one &lt;code class=&quot;highlighter-rouge&quot;&gt;use-fixture&lt;/code&gt; is applied to all tests in the same namespace,
my &lt;code class=&quot;highlighter-rouge&quot;&gt;wrap-test&lt;/code&gt; and fixture design don’t work nicely.
There should be a way to cope with this problem.
It will be my next challenge.&lt;/p&gt;

&lt;p&gt;If you are interested, my solution and test code for &lt;a href=&quot;https://www.hackerrank.com/domains/tutorials/30-days-of-code&quot;&gt;30 Days of Code&lt;/a&gt;
are in my repository, &lt;a href=&quot;https://github.com/yokolet/thirty-day-code&quot;&gt;thirty-day-code&lt;/a&gt;.&lt;/p&gt;</content><author><name></name></author><summary type="html">HackerRank Code Testing by Clojure</summary></entry><entry><title type="html">Maximal Square and Rectangle</title><link href="/2017/06/16/maximal-area.html" rel="alternate" type="text/html" title="Maximal Square and Rectangle" /><published>2017-06-16T00:00:00-07:00</published><updated>2017-06-16T00:00:00-07:00</updated><id>/2017/06/16/maximal-area</id><content type="html" xml:base="/2017/06/16/maximal-area.html">&lt;h4 id=&quot;maximal-siblings&quot;&gt;Maximal Siblings&lt;/h4&gt;

&lt;p&gt;A bunch of algorithm questions take a style of “maximum is a good thing.”
Maximal sum, maximal length or maximal size are examples.
This memo is about maximal size, precisely, square and rectangle.&lt;/p&gt;

&lt;p&gt;These two have quite similar descriptions. So, I call those siblings.
The problems are “given 2D matrix filled with 0’s and 1’s, find maximal square/rectangle.”
Approaches how to solve are also similar.
However, a difficulty level is not the same.
The maximal square question is much easier.
The maximal rectangle question needs an additional step to find the maximum.&lt;/p&gt;

&lt;p&gt;I’m going to start off with the maximal square.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---maximal-square&quot;&gt;Problem Description - Maximal Square&lt;/h4&gt;

&lt;p&gt;Given a 2D binary matrix filled with 0’s and 1’s, find the maximal square with all 1’s.&lt;/p&gt;

&lt;p&gt;For example, following 2D matrix is given:&lt;/p&gt;

&lt;pre&gt;

1   0   1   0   0

1   0   1   1   1

1   1   1   1   1

1   0   0   1   0

&lt;/pre&gt;

&lt;p&gt;The answer will be 4.&lt;/p&gt;

&lt;pre&gt;

1   0   1   0   0
      +-------+
1   0 | 1   1 | 1
      |       |
1   1 | 1   1 | 1
      +-------+
1   0   0   1   0

&lt;/pre&gt;

&lt;h4 id=&quot;the-idea-to-find-maximal-square&quot;&gt;The idea to find maximal square&lt;/h4&gt;

&lt;p&gt;This is a dynamic programming quesition, so optimal substructure exists:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;include the current cell to form a square&lt;/li&gt;
  &lt;li&gt;exclude the current call&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The state to maintain in the auxiliary table is the size of the square so far.
Following the DP manner, the table will be created by bottom up.&lt;/p&gt;

&lt;p&gt;The first column and row remain as those are.
When the value of matrix at i’th row and j’th column is 1,
look above, above-left, and left.
Among three, find minimum then plus one.
This is the value in the auxiliary table.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-finding-maximal-square&quot;&gt;Java code for finding maximal square&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class MaximalSquare {
    static int min(int a, int b, int c) {
        return Math.min(a, Math.min(b, c));
    }

    static int findMaxSquare(int[][] matrix) {
        int n = matrix.length;
        int m = matrix[0].length;
        int[][] memo = new int[n][m];
        int max = 0;
        // initialize
        // copy first column
        for (int i = 0; i &amp;lt; n; i++) {
            memo[i][0] = matrix[i][0];
            max = Math.max(max, memo[i][0]);
        }
        // copy first row
        for (int i = 1; i &amp;lt; m; i++) {
            memo[0][i] = matrix[0][i];
            max = Math.max(max, memo[0][i]);
        }
        // fill the rest
        for (int i = 1; i &amp;lt; n; i++) {
            for (int j = 1; j &amp;lt; m; j++) {
                if (matrix[i][j] == 1) {
                    memo[i][j] = min(memo[i - 1][j], memo[i - 1][j - 1], memo[i][j - 1]) + 1;
                } else {
                    memo[i][j] = 0;
                }
                max = Math.max(max, memo[i][j]);
            }
        }
        return max * max;
    }

    public static void main(String[] args) {
        int[][] matrix = {
                {1, 0, 1, 0, 0},
                {1, 0, 1, 1, 1},
                {1, 1, 1, 1, 1},
                {1, 0, 0, 1, 0}
        };
        System.out.println(findMaxSquare(matrix));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/6855bc82a187fa8cd2316973bdbe03dd.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The performance is: time O(nm), space O(nm), where n: rows, m: columns&lt;/p&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;

4

&lt;/pre&gt;

&lt;h4 id=&quot;problem-description---maximal-rectangle&quot;&gt;Problem Description - Maximal Rectangle&lt;/h4&gt;

&lt;p&gt;Given a 2D binary matrix filled with 0’s and 1’s, find the maximal rectangle with all 1’s.&lt;/p&gt;

&lt;p&gt;For example, following 2D matrix is given:&lt;/p&gt;

&lt;pre&gt;

1   0   1   0   0

1   0   1   1   1

1   1   1   1   1

1   0   0   1   0

&lt;/pre&gt;

&lt;p&gt;The answer will be 6.&lt;/p&gt;

&lt;pre&gt;

1   0   1   0   0
      +-----------+
1   0 | 1   1   1 |
      |           |
1   1 | 1   1   1 |
      +-----------+
1   0   0   1   0

&lt;/pre&gt;

&lt;h4 id=&quot;the-idea-to-find-maximal-rectangle&quot;&gt;The idea to find maximal rectangle&lt;/h4&gt;

&lt;p&gt;Also, this is a dynamic programming problem, but has an extra process.
The first step of DP sees vertically.
The second step sees horizontally.&lt;/p&gt;

&lt;p&gt;For the DP step, the optimal substructure exists, like the square problem.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;include the current cell to form a rectangle&lt;/li&gt;
  &lt;li&gt;exclude the current cell&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The state to maintain in the auxiliary table is the size of 1’s of vertical stretch.
Following the DP manner, the table will be created by bottom up.
When the value of matrix at i’th row and j’th column is 1, look above then plus one.
This is the value in the auxiliary table.&lt;/p&gt;

&lt;p&gt;After creating the auxiliary table, I need to find the maximal area looking at horizontally.
How to find it?
This is exactly the same as &lt;a href=&quot;http://yokolet.github.io/2017/05/25/largest-rectangle-in-histogram.html&quot;&gt;Largest Rectangle in Histogram&lt;/a&gt; problem.&lt;/p&gt;

&lt;p&gt;The second step looks each row to find its max.
By comparison of each max, I can get the maximal area.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-finding-maximal-rectangle&quot;&gt;Java code for finding maximal rectangle&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.Stack;

public class MaximalRectangle {
    static int findMaxArea(int l, int[] heights) {
        Stack&amp;lt;Integer&amp;gt; stack = new Stack&amp;lt;Integer&amp;gt;();
        int max_area = 0;
        for (int i = 0; i &amp;lt; l; i++) {
            while (!stack.isEmpty() &amp;amp;&amp;amp; heights[stack.peek()] &amp;gt; heights[i]) {
                int top_height = heights[stack.pop()];
                int w = stack.isEmpty() ? i : i - stack.peek() - 1;
                max_area = Math.max(max_area, w * top_height);
            }
            stack.push(i);
        }
        return max_area;
    }

    static int maximalRectangle(int[][] matrix) {
        int n = matrix.length;
        int m = n == 0 ? 0 : matrix[0].length;
        int[][] memo = new int[n][m + 1];

        // initialize
        // first row
        for (int i = 0; i &amp;lt; m; i++) {
            memo[0][i] = matrix[0][i] == 1 ? 1 : 0;
        }

        for (int i = 1; i &amp;lt; n; i++) {
            for (int j = 0; j &amp;lt; m; j++) {
                if (matrix[i][j] == 1) {
                    memo[i][j] = memo[i - 1][j] + 1;
                } else {
                    memo[i][j] = 0;
                }
            }
        }

        // find max
        int max = 0;
        for (int i = 0; i &amp;lt; n; i++) {
            max = Math.max(max, findMaxArea(m + 1, memo[i]));
        }
        return max;
    }

    public static void main(String[] args) {
        int[][] matrix = {
                {1, 0, 1, 0, 0},
                {1, 0, 1, 1, 1},
                {1, 1, 1, 1, 1},
                {1, 0, 0, 1, 0}
        };
        System.out.println(maximalRectangle(matrix));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/0e865893f44e5329c138a4cb24be4d45.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The performance is: time O(nm), space O(nm), where n: rows, m: columns&lt;/p&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;

6

&lt;/pre&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/maximum-size-sub-matrix-with-all-1s-in-a-binary-matrix/&quot;&gt;Maximum size square sub-matrix with all 1s&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2014/06/leetcode-maximal-square-java/&quot;&gt;Maximal Square&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://algorithms.tutorialhorizon.com/dynamic-programming-maximum-size-square-sub-matrix-with-all-1s/&quot;&gt;Maximum size square sub-matrix with all 1s&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/maximum-size-rectangle-binary-sub-matrix-1s/&quot;&gt;Maximum size rectangle binary sub-matrix with all 1s&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2014/05/leetcode-maximal-rectangle-java/&quot;&gt;Maximal Rectangle&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Maximal Siblings</summary></entry><entry><title type="html">Iterator To Flatten It</title><link href="/2017/06/15/iterator-to-flatten.html" rel="alternate" type="text/html" title="Iterator To Flatten It" /><published>2017-06-15T00:00:00-07:00</published><updated>2017-06-15T00:00:00-07:00</updated><id>/2017/06/15/iterator-to-flatten</id><content type="html" xml:base="/2017/06/15/iterator-to-flatten.html">&lt;h4 id=&quot;iterator-revisited&quot;&gt;Iterator Revisited&lt;/h4&gt;

&lt;p&gt;“Iterator” is one of design patterns in object-oriented programming (OOP).
Needless to say, extremely famous Gang of Four (Erich Gamma, Richard Helm, Ralph Johnson and John Vlissides) are creators.
As in the Wikipedia’s &lt;a href=&quot;https://en.wikipedia.org/wiki/Iterator_pattern&quot;&gt;Iterator pattern&lt;/a&gt;,
the iterator pattern is used when traversing &lt;em&gt;container&lt;/em&gt; without knowing how the container works. It is OOP’s favorite pattern to “decouple” the iterator from container.&lt;/p&gt;

&lt;p&gt;What does that actually mean? The iterator defines two methods, &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt;.
Repeating these two method, I can traverse all elements in the container.
For example, Java’s ArrayList are LinkedList examples of the containers.
These two have different data structures, but I can traverse all elements exactly the same way: &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;nex()&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Since the iterator is a handy feature, many including custom classes provide a way to access their elements by the iterator.
Probably, this is a reason I see various iterator implementation problems.
The iterator looks a good topic to leave a memo, so I’m going to write about two iterators here.
These two will flatten nested structure: 2D vector and nested list.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---flatten-2d-vector&quot;&gt;Problem Description - Flatten 2D Vector&lt;/h4&gt;

&lt;p&gt;“Implement an iterator to flatten 2D vector” is the problem.
It is the iterator, so the implementation should have &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; methods.
Repeating these two methods, all elements in 2D vector should be traversed.
For example, &lt;code class=&quot;highlighter-rouge&quot;&gt;[[1, 2], [3], [4, 5, 6]]&lt;/code&gt; is given, the code:&lt;/p&gt;

&lt;pre&gt;

    while (v2DIter.hasNext()) {
        result.add(v2DIter.next());
    }

&lt;/pre&gt;

&lt;p&gt;should add all elements to the result list.
When it finishes, the result should be &lt;code class=&quot;highlighter-rouge&quot;&gt;[1, 2, 3, 4, 5, 6]&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-implement-iterator-to-flatten-2d-vector&quot;&gt;The idea to implement iterator to flatten 2D vector&lt;/h4&gt;

&lt;p&gt;This sort of nested something is often solved by iterator of iterators approach.
A parent iterator traverses vectors, say &lt;code class=&quot;highlighter-rouge&quot;&gt;[1, 2]&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;[3]&lt;/code&gt;.
Child iterators traverse individual elements, say &lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;2&lt;/code&gt;, or &lt;code class=&quot;highlighter-rouge&quot;&gt;3&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The most challenging part is when and how to update the child iterator.
Choices are only two: either &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; method must be responsible to update.
In general, it is reasonable to do in &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; method.
This is because, updating the itereator changes a current element where the iterator points.
This behavior is something unexptected for &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt;, but reasonable to &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; method.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-iterating-2d-vector&quot;&gt;Java code for iterating 2D Vector&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class Vector2DIterator implements Iterator&amp;lt;Integer&amp;gt; {
    Iterator&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; parent = null;
    Iterator&amp;lt;Integer&amp;gt; child = null;

    void updateChild() {
        while (!child.hasNext() &amp;amp;&amp;amp; parent.hasNext()) {
            child = parent.next().iterator();
        }
    }

    public Vector2DIterator(List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; vec2d) {
        if (vec2d == null || vec2d.size() == 0 ) { return; }
        parent = vec2d.iterator();
        if (parent.hasNext()) {
            child = parent.next().iterator();
            updateChild();
        }
    }

    @Override
    public boolean hasNext() {
        return child != null &amp;amp;&amp;amp; child.hasNext();
    }

    @Override
    public Integer next() {
        Integer temp = child.next();
        updateChild();
        return temp;
    }

    static void iterate(Vector2DIterator v2DIter) {
        while (v2DIter.hasNext()) {
            System.out.print(v2DIter.next() + &amp;quot;, &amp;quot;);
        }
        System.out.println();
    }
    
    public static void main(String[] args) {
        List&amp;lt;Integer&amp;gt; inner0 = Arrays.asList(1, 2);
        List&amp;lt;Integer&amp;gt; inner1 = Arrays.asList(3);
        List&amp;lt;Integer&amp;gt; inner2 = Arrays.asList(4, 5, 6);
        List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; input = Arrays.asList(inner0, inner1, inner2);
        Vector2DIterator v2DIter = new Vector2DIterator(input);
        iterate(v2DIter);
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/21551034731033910bc6ebe216bfee14.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;Above prints:&lt;/p&gt;

&lt;pre&gt;

1, 2, 3, 4, 5, 6, 

&lt;/pre&gt;

&lt;h4 id=&quot;problem-description---flatten-nested-list&quot;&gt;Problem Description - Flatten Nested List&lt;/h4&gt;

&lt;p&gt;“Implement an iterator to flatten nested list” is the problem.
Like previous problem, the iterator implementation should have &lt;code class=&quot;highlighter-rouge&quot;&gt;hasNext()&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; methods.
Repeating these two methods, all elements in the nested list should be traversed.
For example, &lt;code class=&quot;highlighter-rouge&quot;&gt;[[1, 2], 3, [4, [5, 6]]]&lt;/code&gt; is given, the code:&lt;/p&gt;

&lt;pre&gt;

    while (nestedLIter.hasNext()) {
        result.add(nestedLIter.next());
    }

&lt;/pre&gt;

&lt;p&gt;should add all elements to the result list.
When it finishes, the result should be &lt;code class=&quot;highlighter-rouge&quot;&gt;[1, 2, 3, 4, 5, 6]&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This is similar to flatten 2D vector.
Big difference is inside of an outermost list is not always a list.
Inner elements may be an integer, list, or nested list.
This problem is more complicated compared to the previous one.&lt;/p&gt;

&lt;p&gt;To express each element in the nested list,
the interface &lt;code class=&quot;highlighter-rouge&quot;&gt;NestedInteger&lt;/code&gt; is provided.&lt;/p&gt;

&lt;pre&gt;

    interface NestedInteger {
        boolean isInteger();
        Integer getInteger();
        List&amp;lt;NestedInteger&amp;gt; getList();
    }

&lt;/pre&gt;

&lt;h4 id=&quot;the-idea-to-implement-iterator-to-flatten-nested-list&quot;&gt;The idea to implement iterator to flatten nested list&lt;/h4&gt;

&lt;p&gt;Here again, this sort of nested something can be solved by iterator of iterators approach.
In this case, iterator of iterafor of iterator of … may be there.
To keep track the data something like … of … of … of …., a stack would be a good data structure.&lt;/p&gt;

&lt;p&gt;If I find the itereator points a list, I will stack it.
Then, I will pull out an inner iterator.
If the inner iteartor points another list, I will stack it.
Then, I will pull out the inner of inner iterator (repeat this as long as needed).
At some level, pulled out iterator should point an integer.
This is the value to add to the result.&lt;/p&gt;

&lt;p&gt;Likewise, the challenging part is when and how to update the iterators.
Following the policy, “reasonable to do in &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt; method,
the iterators will be updated in &lt;code class=&quot;highlighter-rouge&quot;&gt;next()&lt;/code&gt;.
However, in this case, I saved a current integer value to an instance variable.
This is because current interator may or may not points a value. It may another itereator.
Saving a &lt;em&gt;next&lt;/em&gt; value makes easy to update the iterators.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-iterating-nested-list&quot;&gt;Java code for iterating nested list&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.*;

public class NestedListIterator implements Iterator&amp;lt;Integer&amp;gt; {
    interface NestedInteger {
        boolean isInteger();
        Integer getInteger();
        List&amp;lt;NestedInteger&amp;gt; getList();
    }

    Stack&amp;lt;Iterator&amp;lt;NestedInteger&amp;gt;&amp;gt; stack;
    Integer current = null;

    void updateIterator() {
        while (!stack.isEmpty() &amp;amp;&amp;amp; current == null) {
            Iterator&amp;lt;NestedInteger&amp;gt; top = stack.peek();
            if (!top.hasNext()) {
                stack.pop();
                continue;
            }
            NestedInteger ni = top.next();
            if (ni.isInteger()) {
                current = ni.getInteger();
            } else {
                stack.push(ni.getList().iterator());
            }
        }
    }

    NestedListIterator(List&amp;lt;NestedInteger&amp;gt; nestedList) {
        stack = new Stack();
        stack.push(nestedList.iterator());
        updateIterator();
    }

    @Override
    public boolean hasNext() {
        return current != null ? true : false;
    }

    @Override
    public Integer next() {
        Integer temp = current;
        current = null;
        updateIterator();
        return temp;
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/e9f1387f213e872d15697d5d13eaedcd.js&quot;&gt; &lt;/script&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2014/05/leetcode-flatten-nested-list-iterator-java/&quot;&gt;Flatten Nested List Iterator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Iterator Revisited</summary></entry><entry><title type="html">Valid Combinations of Numbers</title><link href="/2017/06/14/valid-number-combinations.html" rel="alternate" type="text/html" title="Valid Combinations of Numbers" /><published>2017-06-14T00:00:00-07:00</published><updated>2017-06-14T00:00:00-07:00</updated><id>/2017/06/14/valid-number-combinations</id><content type="html" xml:base="/2017/06/14/valid-number-combinations.html">&lt;h4 id=&quot;splitting-a-string-in-valid-ways&quot;&gt;Splitting a String in Valid Ways&lt;/h4&gt;

&lt;p&gt;Various types of String related problems exist.
Among them, splitting it to make something valid would be a typical one.
For example, a string of numbers is givne, “make valid IP addresses” is the example.
Very similar problem is “make valid lottery numbers.”&lt;/p&gt;

&lt;p&gt;When the given string is made by alphabetical characters,
the problem may ask word breaks with a dictionary.&lt;/p&gt;

&lt;p&gt;“Vallid IP addresses” and “valid lottery numbers” are quite similar problems.
I’m going to write a memo about these two here.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---restore-ip-addresses&quot;&gt;Problem Description - Restore IP Addresses&lt;/h4&gt;

&lt;p&gt;Given a string, restore valid IP addresses.
For example, “25525511135” is given, the answer will be [“255.255.11.135”, “255.255.111.35”].&lt;/p&gt;

&lt;p&gt;There are some constraints to make it the valid IP address.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;valid IP addresses should have four parts separated by “.”(dot).&lt;/li&gt;
  &lt;li&gt;each digits must be between 0 to 255&lt;/li&gt;
  &lt;li&gt;if the character is ‘0’, it should not be followed by any number. ex) 255.0.0.1&lt;/li&gt;
  &lt;li&gt;must use all characters in the same order&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When all of the constraints are met, the string becomes the valid IP address.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-split-a-string-to-make-ip-addresses&quot;&gt;The idea to split a string to make IP addresses&lt;/h4&gt;

&lt;p&gt;If I think of the first part, it will be three patterns in maximum.
For example, “25525511135” is given, “2”, “25”, and “255 are all valid numbers to start.
When the first part is “2”, the valid second part will be “5” and “55.”
Possible combinations create tree structure as in below.&lt;/p&gt;

&lt;pre&gt;

            /           |          \
          /             |            \
         2             25            255
      /  |         /    |         /   |   \
    /    |      /       |       /     |      \
   5     55     5      52      2      25     255
  | \  / | \  / | \   /   \  / | \  /   \   / | \

&lt;/pre&gt;

&lt;p&gt;When four parts of an IP address are created using valid numbers, another check runs:
whether all given characters are used or not.
If yes, I will add the IP address to the result list.&lt;/p&gt;

&lt;p&gt;To solve this problem, I see a Depth First Search (DFS) works well.
People have solved by various approaches, however, DFS is straightforward.
This is because finding the answer is traversing a tree.&lt;/p&gt;

&lt;p&gt;In each step, take one to three characters.
When the number is valid, make it a part of IP address.
Going deeper and take one to three characters, …(repeat)…
In the end, check whether all characters are used to create valid four parts of IP address.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-restoring-valid-ip-addresses&quot;&gt;Java code for restoring valid IP addresses&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.ArrayList;
import java.util.List;

public class RestoreIpAddresses {
    static void restoreIpAddresses(String s, List&amp;lt;String&amp;gt; result, String ip, int count, int index) {
        if (count &amp;gt; 4) { return; }
        if (count == 4 &amp;amp;&amp;amp; ip.length() == (s.length() + 3)) {
            result.add(ip);
        }

        for (int i = 1; i &amp;lt;= 3; i++) {
            if (index + i &amp;gt; s.length()) { break; }
            String sub = s.substring(index, index + i);
            if ((sub.charAt(0) == &amp;#39;0&amp;#39; &amp;amp;&amp;amp; i &amp;gt; 1) || (Integer.parseInt(sub) &amp;gt; 255 &amp;amp;&amp;amp; i == 3)) {
                continue;
            }
            String next = ip + sub + (count == 3 ? &amp;quot;&amp;quot; : &amp;quot;.&amp;quot;);
            restoreIpAddresses(s, result, next, count + 1, index + i);
        }
    }

    static List&amp;lt;String&amp;gt; restoreIpAddresses(String s) {
        List&amp;lt;String&amp;gt; result = new ArrayList();
        if (s.isEmpty()) { return result; }
        restoreIpAddresses(s, result, &amp;quot;&amp;quot;, 0, 0);
        return result;
    }

    public static void main(String[] args) {
        String s;
        s = &amp;quot;25525511135&amp;quot;;
        System.out.println(restoreIpAddresses(s));
        s = &amp;quot;0000&amp;quot;;
        System.out.println(restoreIpAddresses(s));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/3fdcfbc84049a1a94deaae80dced35fb.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;Above prints:&lt;/p&gt;

&lt;pre&gt;

[255.255.11.135, 255.255.111.35]
[0.0.0.0]

&lt;/pre&gt;

&lt;p&gt;Time complexity: O(3^4).&lt;/p&gt;

&lt;h4 id=&quot;problem-description---restore-lottery-numbers&quot;&gt;Problem Description - Restore Lottery Numbers&lt;/h4&gt;

&lt;p&gt;Given a string, restore valid lottery numbers.
For example, “4938532894754” is given, the answer will be [“49 38 53 28 9 47 54”].&lt;/p&gt;

&lt;p&gt;The problem description sometimes starts from “uncle, Morty.”&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Your facorite uncle, Morty, is crazy about the lottery and
even crazier about how he picks his “lucky” numbers…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Like the IP address problem, there are some constraints to make it valid.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;valid lottery numbeers should have 7 parts separated by “ “(space).&lt;/li&gt;
  &lt;li&gt;each digits must be between 1 and 59&lt;/li&gt;
  &lt;li&gt;all digits are unique&lt;/li&gt;
  &lt;li&gt;must use all characters in the same order&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;the-idea-to-split-a-string-to-make-lottery-numbers&quot;&gt;The idea to split a string to make lottery numbers&lt;/h4&gt;

&lt;p&gt;This is almost identical to valid IP address problem.
The small differences are from four parts to seven, from dot to space,
and from 0-255 to 1-59.
Relaitvely big difference is, in lottery problem, each digit is unique.&lt;/p&gt;

&lt;p&gt;To check uniqueness, I added a set in the DFS interation:
add the number to set when going deeper, remove the number when coming back.&lt;/p&gt;

&lt;p&gt;Except the differences above, the code is the same as valid IP addresses.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-restoring-valid-lottery-numbers&quot;&gt;Java code for restoring valid lottery numbers&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class RestoreLotteryNumber {
    static void restoreLotteryNumbers(String s, List&amp;lt;String&amp;gt; result, Set&amp;lt;String&amp;gt; seen,
                                      String number, int count, int index) {
        if (count &amp;gt; 7) { return; }
        if (count == 7 &amp;amp;&amp;amp; number.length() == (s.length() + 6)) {
            result.add(number);
        }
        for (int i = 1; i &amp;lt;= 2; i++) {
            if (index + i &amp;gt; s.length()) { break; }
            String sub = s.substring(index, index + i);
            if (seen.contains(sub) || (Integer.parseInt(sub) &amp;gt; 59)) {
                continue;
            } else {
                seen.add(sub);
                String next = number + sub + (count == 6 ? &amp;quot;&amp;quot; : &amp;quot; &amp;quot;);
                restoreLotteryNumbers(s, result, seen, next, count + 1, index + i);
                seen.remove(sub);
            }
        }
    }

    static List&amp;lt;String&amp;gt; restoreLotteryNumbers(String s) {
        List&amp;lt;String&amp;gt; result = new ArrayList();
        if (s.isEmpty()) { return result; }
        restoreLotteryNumbers(s, result, new HashSet&amp;lt;String&amp;gt;(), &amp;quot;&amp;quot;, 0, 0);
        return result;
    }

    public static void main(String[] args) {
        String s;
        s = &amp;quot;4938532894754&amp;quot;;
        System.out.println(restoreLotteryNumbers(s));
        s = &amp;quot;1634616512&amp;quot;;
        System.out.println(restoreLotteryNumbers(s));
        s = &amp;quot;11223344&amp;quot;;  // invalid, no result
        System.out.println(restoreLotteryNumbers(s));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/0b565ac9e3340dba6b91a3e15cf104d1.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;

[49 38 53 28 9 47 54]

[1 6 3 46 16 5 12, 1 6 3 46 16 51 2, 16 3 46 1 6 5 12, 16 3 46 1 6 51 2]

[]

&lt;/pre&gt;

&lt;p&gt;Time complexity: O(2^7)&lt;/p&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://qa.geeksforgeeks.org/3336/print-all-valid-combinations-of-ip-address&quot;&gt;Print all valid combinations of IP address&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2014/06/leetcode-restore-ip-addresses-java/&quot;&gt;Restore IP Addresses&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/raviswan/ProgrammingProblems&quot;&gt;Lottery Ticket Problem&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.sdeskills.com/qotd-2016-oct-28-winning-ticket/&quot;&gt;Winning Ticket&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Splitting a String in Valid Ways</summary></entry><entry><title type="html">Weird Puzzle Questions - Egg and Celebrity</title><link href="/2017/06/13/weird-puzzles.html" rel="alternate" type="text/html" title="Weird Puzzle Questions - Egg and Celebrity" /><published>2017-06-13T00:00:00-07:00</published><updated>2017-06-13T00:00:00-07:00</updated><id>/2017/06/13/weird-puzzles</id><content type="html" xml:base="/2017/06/13/weird-puzzles.html">&lt;h4 id=&quot;weird-questions-at-least-to-me&quot;&gt;Weird Questions (At Least to Me)&lt;/h4&gt;

&lt;p&gt;I’m going to write about two weird algorithm problems.
One is so-called egg dropping, another is finding a celebrity.
I see these two problems here and there.
From that, I guess those two are famous algorithm questions.
But, at least, those two are quite weird.
Some call them &lt;em&gt;puzzle&lt;/em&gt;. (Yeah, maybe… I was totally puzzled.)&lt;/p&gt;

&lt;p&gt;The egg dropping and finding a celebrity problems are unrelated.
The approaches and solutions are very different.
However, in terms of their weirdness,
I’m going to write a memo put those two together here.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---egg-dropping&quot;&gt;Problem Description - Egg Dropping&lt;/h4&gt;

&lt;p&gt;Many algorithm questions have succinct descriptions.
Not like those, this problem needs lengthy explanation.
I re-read a few times to understand such long description correctly.
Also, it was to figure out how to solve the problem.&lt;/p&gt;

&lt;p&gt;The problem is sometime called “Two Egg Problem” since often &lt;em&gt;two&lt;/em&gt; eggs are used.
These two eggs play a role to find the highest, safe floor to drop the egg without breaking it.
The problem description is:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;K floors are there in total.&lt;/li&gt;
  &lt;li&gt;There exists the highest floor an egg safely lands.&lt;/li&gt;
  &lt;li&gt;Two (or more) eggs are given.&lt;/li&gt;
  &lt;li&gt;If the egg doesn’t break after the dropping, it can be reused.&lt;/li&gt;
  &lt;li&gt;If the egg breaks, the broken egg won’t be used again.&lt;/li&gt;
  &lt;li&gt;If the egg safely lands after dropping from the floor K_j, lower floors of K_j are considered safe.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Given above conditions, “find the highest, safe floor to drop the egg” is the problem.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-find-the-highest-safe-floor&quot;&gt;The idea to find the highest safe floor&lt;/h4&gt;

&lt;p&gt;A bruto force solution is always there which starts dropping the egg from the lowest floor.
Then, try one by one going upward to the top floor.
At some floor, the egg will break for the first time.
One floor below (the last safe floor) is the answer.
If only one egg is available, this is only way to solve the problem.&lt;/p&gt;

&lt;p&gt;However, there’s an effective solution when multiple eggs are available.&lt;/p&gt;

&lt;p&gt;This problem is often categorized to dynamic programming.
So, an optimal substructure exists:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;the egg breaks&lt;/li&gt;
  &lt;li&gt;the egg doesn’t break (safely lands)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The state to maintain in memorization table is a minimum number of attemps.
For example, table[i][j] expresses the minimum attemps at i eggs and j-th floor.&lt;/p&gt;

&lt;p&gt;table[i][j] will be calcuated by:&lt;/p&gt;

&lt;pre&gt;

min(1 + max(table[i - 1][k - 1], table[i][j - k])) where k = 1 to j
            ^^^^^^^^^^^^^^^^^^   ^^^^^^^^^^^^^^^
                  breaks          doesn't break

&lt;/pre&gt;

&lt;h4 id=&quot;java-code-for-finding-the-highest-safe-floor&quot;&gt;Java code for finding the highest safe floor&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class EggDropping {
    static int findFloor(int n, int k) {
        // n: number of eggs
        // k: number of floors
        int[][] memo = new int[n + 1][k + 1];
        // initialize
        // 0 trial for 0th floor
        // 1 trial for 1st floor
        for (int i = 1; i &amp;lt;= n; i++) {
            memo[i][0] = 0;
            memo[i][1] = 1;
        }
        // in case of only one egg is given
        for (int i = 1; i &amp;lt;= k; i++) {
            memo[1][i] = i;
        }

        // fill the rest
        for (int i = 2; i &amp;lt;= n; i++) {
            for (int j = 2; j &amp;lt;= k; j++) {
                int minimum = Integer.MAX_VALUE;
                for (int x = 1; x &amp;lt;= j; x++) {
                    int temp = 1 + Math.max(memo[i - 1][x - 1], memo[i][j - x]);
                    minimum = Math.min(minimum, temp);
                }
                memo[i][j] = minimum;
            }
        }
        return memo[n][k];
    }

    public static void main(String[] args) {
        int n, k;
        n = 2;
        k = 36;
        System.out.println(findFloor(n, k));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/a6843a4336e46e13fa7a3ef44ef2d0b9.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;Above prints:&lt;/p&gt;

&lt;pre&gt;

8

&lt;/pre&gt;

&lt;p&gt;Time complexity: O(nk^2), n: eggs, k: floors&lt;/p&gt;

&lt;h4 id=&quot;problem-description---finding-a-celebrity&quot;&gt;Problem Description - Finding a Celebrity&lt;/h4&gt;

&lt;p&gt;This problem also has a lot of descriptions like egg dropping problem.
The details are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;n people come to a party&lt;/li&gt;
  &lt;li&gt;one of them is a celebrity either he or she&lt;/li&gt;
  &lt;li&gt;this only one celebrity does not know anyone in the party&lt;/li&gt;
  &lt;li&gt;all n - 1 people know who is the celebrity&lt;/li&gt;
  &lt;li&gt;only one available question is “does A know B?”&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;boolean know(int A, int B)&lt;/code&gt; method is proveded which returns true if A knows B&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Given above conditions, “find the celebrity in the minimum
number of questions” is the problem.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-find-the-celebrity&quot;&gt;The idea to find the celebrity&lt;/h4&gt;

&lt;p&gt;The problem describes relations between people.
If I draw the relations, it will be a directed graph of n people (n nodes).
The celebrity node has an out-degree zero and in-degree n - 1.&lt;/p&gt;

&lt;pre&gt;

              +----------------------+
              |                      |
              v                      |
 (p0) -----&amp;gt; (C) &amp;lt;----- (p2) &amp;lt;----- (p3)
            ^   ^^
            |   | \
            |   |   \
            |   |     \
         (p4) (p5) &amp;lt;--- (p6)

&lt;/pre&gt;

&lt;p&gt;Given the graph above, the method, &lt;code class=&quot;highlighter-rouge&quot;&gt;know(A, B)&lt;/code&gt;, is the same as &lt;code class=&quot;highlighter-rouge&quot;&gt;has an edge from A to B&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To solve this problem, a typical approach consists of two steps.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Elimination step&lt;/li&gt;
  &lt;li&gt;Verification step&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The elimination step eliminates people who are not a celeb apprently.
Here, stack is a good data structure.
After pushing all poeple to the stack, run &lt;code class=&quot;highlighter-rouge&quot;&gt;know&lt;/code&gt; method.
If A has an edge to B, eliminates A since A is not a celeb.
Also, check the edge from B to A.&lt;/p&gt;

&lt;p&gt;The verification step verifies the last person is a celeb.
This is because the elimination process may leave no celeb person in the stack.
For example, a top rightmost node p3 in the graph has two outbound edges.
Suppose the first question is made against the celeb (C), p3 will be removed.
Later, p2 appears, and nobody says “I know p2.”&lt;/p&gt;

&lt;p&gt;For this reason, the verification step is there to
ensure the person in the stack is the celeb.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-square-root-implementation&quot;&gt;Java code for square root implementation&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;import java.util.*;

public class FindTheCelebrity {
    static int N = 7;
    static Map&amp;lt;Integer, List&amp;lt;Integer&amp;gt;&amp;gt; relation = new HashMap();
    static {
        relation.put(0, Arrays.asList(1));
        relation.put(1, new ArrayList());  // celebrity
        relation.put(2, Arrays.asList(1));
        relation.put(3, Arrays.asList(1, 2));
        relation.put(4, Arrays.asList(1));
        relation.put(5, Arrays.asList(1));
        relation.put(6, Arrays.asList(1, 5));
    }

    static boolean knows(int a, int b) {
        return relation.get(a).contains(b);
    }

    static int findCelebrity() {
        Stack&amp;lt;Integer&amp;gt; stack = new Stack();
        for (int i = 0; i &amp;lt; N; i++) {
            stack.push(i);
        }

        // elimination
        while (stack.size() &amp;gt; 1) {
            int a = stack.pop();
            int b = stack.pop();
            if (knows(a, b)) {
                // a knows b
                // b is a potential celeb
                // make b back to stack
                stack.push(b);
            } else {
                // a doesn&amp;#39;t knows b
                // a is a potential celeb
                // make a back to stack
                stack.push(a);
            }
        }
        int c = stack.pop();

        // verification
        for (int i = 0; i &amp;lt; N; i++) {
            if ((i != c) &amp;amp;&amp;amp; (knows(c, i) || !knows(i, c))) {
                return -1;
            }
        }
        return c;
    }

    public static void main(String[] args) {
        System.out.println(findCelebrity());
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/8b9e766261890b78e849d162efcf82a1.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;Time complexity: O(n), space complexity O(n)&lt;/p&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;
1
&lt;/pre&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/dynamic-programming-set-11-egg-dropping-puzzle/&quot;&gt;Dynamic Programming Set 11 (Egg Dropping Puzzle)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=3hcaVyX00_4&quot;&gt;Egg Dropping Dynamic Programming (YouTube)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/the-celebrity-problem/&quot;&gt;The Celebrity Problem&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cs.princeton.edu/courses/archive/spring13/cos423/problem0-1.pdf&quot;&gt;Celebrity Identification Problem&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Weird Questions (At Least to Me)</summary></entry><entry><title type="html">Sqrt - Math Without Operator To Do It</title><link href="/2017/06/12/sqrt.html" rel="alternate" type="text/html" title="Sqrt - Math Without Operator To Do It" /><published>2017-06-12T00:00:00-07:00</published><updated>2017-06-12T00:00:00-07:00</updated><id>/2017/06/12/sqrt</id><content type="html" xml:base="/2017/06/12/sqrt.html">&lt;h4 id=&quot;square-root-without-exact-operators&quot;&gt;Square Root Without Exact Operators&lt;/h4&gt;

&lt;p&gt;In my last post, &lt;a href=&quot;http://yokolet.github.io/2017/06/09/math-without-it.html&quot;&gt;Math Without Operator To Do It&lt;/a&gt;, I wrote about division an power implementations.
There’s one more of this sort worth adding a memo here.
It is calculating a square root.&lt;/p&gt;

&lt;p&gt;There’s always an intuitive solution, while always effective solutions are.
I’m going to write mulltiple solutions.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---integer-square-root-implementation&quot;&gt;Problem Description - Integer Square Root Implementation&lt;/h4&gt;

&lt;p&gt;“Given an integer, find its square root in integer.
If the square root is not an integer, the answer will be a floor of it”&lt;/p&gt;

&lt;p&gt;For example, given 11, the answer will be 3.
It is a fairly easy to understand problem.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-find-a-square-root---naive-iteration&quot;&gt;The idea to find a square root - naive iteration&lt;/h4&gt;

&lt;p&gt;Since the answer will be only integer,
I counld instantly think of a naive solution.
Iterating integer from one to the given number,
I will hit the integer whose multiple of itself exceeds the given number.
Then, the answer will be that integer minus one.&lt;/p&gt;

&lt;pre&gt;
x: given number

for (int i = 2; i &amp;lt; x; i++) {
    if (i * i &amp;gt; x) {
        return i - 1;
    }
}
&lt;/pre&gt;

&lt;p&gt;This will return a correct answer, but the problem is its slowness.
Time complexity is O(n).&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-find-a-square-root---binary-search&quot;&gt;The idea to find a square root - binary search&lt;/h4&gt;

&lt;p&gt;Again, the answer is the integer.
Also, the answer is between 2 to the given number.
All numbers are there in a sorted order.
This is a perfect condition for a binary search.&lt;/p&gt;

&lt;pre&gt;
x: given number

while (low &amp;lt;= high) {
    long mid = (low + high) / 2;
    long temp = mid * mid;
	if (temp &amp;lt;= x) {
        low = mid + 1;
        result = mid;
    } else {
        high = mid - 1;		
    }
}

&lt;/pre&gt;

&lt;p&gt;The binary search improves the performance to O(log(n)).
This should be fast enough.
However, when the given number is big,
I got time out error on the code competition website.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-find-a-square-root---newton-raphson-method&quot;&gt;The idea to find a square root - Newton-Raphson method&lt;/h4&gt;

&lt;p&gt;This is a really fast, sophisticated solution.
However, despite of very simple code,
it took a while for me to understand why such calculation gives the answer.&lt;/p&gt;

&lt;p&gt;The Newton-Raphson methed (NR method) has a mathematical, especially,
diffential equation backgound.
Also, NR method is an iterative solution to approximate root.
The important point here is to find a function which satisfies:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;diffentiable (continuous)&lt;/li&gt;
  &lt;li&gt;f(x) = 0 for some good value x&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Given such a nice function, if I think of a slope of that,
it would be:&lt;/p&gt;

&lt;pre&gt;

the slope at point: (x_n, f(x_n)), where y = f(x)

f'(x) = d f(x) / dx

f'(x_n) = (y - f(x_n)) / (x - x_n)

by the definition, y = f(x) = 0,

f'(x_n) = (- f(x_n)) / (x_n+1 - x_n)

x_n+1 = x_n - f(x_n) / f'(x_n)

&lt;/pre&gt;

&lt;p&gt;Now, I got the formula to iterate.
The question is what is f(x).
Since I want to find a number &lt;code class=&quot;highlighter-rouge&quot;&gt;x&lt;/code&gt; to the given number &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;

x = sqrt(a)

x^2 = a

x^2 - a = 0

x^2 - a = 0 = f(x)

f'(x) = 2x

&lt;/pre&gt;

&lt;p&gt;Ok, I got the function, so let’s plugin to the previous formula.&lt;/p&gt;

&lt;pre&gt;

x_n+1 = x_n - (x_n^2 - a) / 2 * x_n

x_n+1 = 1/2 * (2 * x_n - x_n^2 / x_n + a / x_n)

x_n+1 = 1/2 * (2 * x_n - x_n + a / x_n)

x_n+1 = 1/2 * (x_n + a / x_n)

&lt;/pre&gt;

&lt;p&gt;If I iterate above calculation not to exceed the given number,
I’ll get the integer square root.&lt;/p&gt;

&lt;p&gt;The time complexity of NR method is the same as binary search, O(log(n)).
However, it quickly converges to the answer.
This is because the binary search increments the value one by one, while
NR method effectively cuts down to half.&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-square-root-implementation&quot;&gt;Java code for square root implementation&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class SquareRoot {
    static int naive(int x) {
        if (x == 0 || x == 1) { return x; }
        for (int i = 2; i &amp;lt; x; i++) {
            long temp = i * i;
            if (temp &amp;gt; x) {
                return i - 1;
            }
        }
        return -1;
    }

    static int binarySearch(int x) {
        if (x == 0 || x == 1) { return x; }
        long low = 1; long high = x;
        long result = 0;
        while (low &amp;lt;= high) {
            long mid = (low + high) / 2;
            long temp = mid * mid;
            if (temp == x) {
                return (int)mid;
            } else if (temp &amp;lt;= x) {
                low = mid + 1;
                result = mid;
            } else {
                high = mid - 1;
            }
        }
        return (int)result;
    }

    static int newtonRaphson(int x) {
        long i = x;
        long temp = i * i;
        while (temp &amp;gt; x) {
            i = (i + x / i) / 2;
            temp = i * i;
        }
        return (int)i;
    }

    public static void main(String[] args) {
        System.out.println(naive(11));
        System.out.println(binarySearch(11));
        System.out.println(newtonRaphson(11));
        System.out.println(newtonRaphson(2147395599));
        System.out.println(binarySearch(2147395599));
        System.out.println(naive(2147395599));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/0a973ce5ef02ae1354fc74c9f92a32c1.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;
3
3
46339
46339
46339
&lt;/pre&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/square-root-of-an-integer/&quot;&gt;Square root of an integer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/program-for-newton-raphson-method/&quot;&gt;Program for Newton Raphson Method&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://mathworld.wolfram.com/NewtonsIteration.html&quot;&gt;Newton’s Iteration&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://mathworld.wolfram.com/NewtonsMethod.html&quot;&gt;Newton’s Methos&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.quora.com/What-is-the-Newton-Rapson-method-for-finding-a-square-root-of-an-integer-number-How-does-one-use-it&quot;&gt;What is the Newton-Raphson method for finding a square root of in integer number? How does one use it?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Square Root Without Exact Operators</summary></entry><entry><title type="html">Math Without Operator To Do It</title><link href="/2017/06/09/math-without-it.html" rel="alternate" type="text/html" title="Math Without Operator To Do It" /><published>2017-06-09T00:00:00-07:00</published><updated>2017-06-09T00:00:00-07:00</updated><id>/2017/06/09/math-without-it</id><content type="html" xml:base="/2017/06/09/math-without-it.html">&lt;h4 id=&quot;divisionpower-without-exact-operators&quot;&gt;Division/Power Without Exact Operators&lt;/h4&gt;

&lt;p&gt;I see this sort of questions among algorithm problems.
I wrote &lt;a href=&quot;http://yokolet.github.io/2017/05/24/you-can-do-it-by-xor.html#addition-without-----operators&quot;&gt;Addtion without +/- operators&lt;/a&gt; in the post about XOR related questions.
“Divide without divison” and “power without its operator or function” are examples as well.&lt;/p&gt;

&lt;p&gt;Not like the addition, a divison and power need to repeat.
Intuitive implementations would be simply repeat subtraction or multiplication.
Those calculates correctly, however, time complexity tends to be O(n).
Better ways are out there.&lt;/p&gt;

&lt;p&gt;I’m going to write a memo how to calculate effectively such
Math-y stuff without exact operators to divide/power.&lt;/p&gt;

&lt;h4 id=&quot;problem-description---divide-without-division-and-mod&quot;&gt;Problem Description - Divide without division and mod&lt;/h4&gt;

&lt;p&gt;“Given two integers, dividend and divisor, calculate division
without divide and modulo operators.”&lt;/p&gt;

&lt;p&gt;The division itself is nothing special.
An answer will be integer when diviend is devidend by divisor.&lt;/p&gt;

&lt;p&gt;For example, given 10 (dividend) and -3 (divisor),
the answer will be -3.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-divide-without-divisionmodulo-operators&quot;&gt;The idea to divide without division/modulo operators&lt;/h4&gt;

&lt;p&gt;Simple solution is count up one by one starting from zero,
while subtracting the divisor from dividend.
A counter is the quotient, which is the answer.&lt;/p&gt;

&lt;pre&gt;
int sign = ...
int a = Math.abs(dividend);
int b = Math.abs(divisor);
int count = 0;
while (a &amp;gt;= b) {
    a -= b;
    count++;
}
return sign * count;
&lt;/pre&gt;

&lt;p&gt;This solution’s performance is considered O(n), where n is the quotient.
This is simple and correct, but surely can be improved.&lt;/p&gt;

&lt;p&gt;To improve above, I should see the number a bit different way.
All numbers can be expressed as:&lt;/p&gt;

&lt;pre&gt;

X = x_0 * (2 ^ 0) + x_1 * (2 ^ 1) + x_2 * (2 ^ 2) + ..... + x_n * (2 ^ n)

&lt;/pre&gt;

&lt;p&gt;For example, 10 is &lt;code class=&quot;highlighter-rouge&quot;&gt;10 * (2 ^ 0) + 1 * (2 ^ 1) + 0 * (2 ^ 2) + 1 * (2 ^ 3)&lt;/code&gt;, and
3 is &lt;code class=&quot;highlighter-rouge&quot;&gt;1 * (2 ^ 0) + 1 * (2 ^ 1)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If I write how to manually calculate the division:&lt;/p&gt;

&lt;pre&gt;

         1 1      &amp;lt;- quotient
    ---------
1 1) 1 0 1 0
       1 1
    ---------
       1 0 0
         1 1
    ---------
           1      &amp;lt;-- modulo

&lt;/pre&gt;

&lt;p&gt;The first step is to find where is the highest bit.
While shifting divisor to the left and counting how many time to repeat,
I will get the answer.&lt;/p&gt;

&lt;pre&gt;

devidend: 10 = 1010
divisor: 3 = 11
count: 1

the first iteration:
divisor: 11 &amp;lt;&amp;lt; 1 =&amp;gt; 110
count:   1 &amp;lt;&amp;lt; 1  =&amp;gt; 10

the second iteration
divisor: 110 &amp;lt;&amp;lt; 1 =&amp;gt; 1100 (exceeds 1010)
count:    10 &amp;lt;&amp;lt; 1 =&amp;gt; 100
&lt;/pre&gt;

&lt;p&gt;The second step is to find what is the quotient.
I’ve already learned how many times to repeat.
So, I want to know each bit is zero or one.&lt;/p&gt;

&lt;p&gt;This step goes like in the manual calculation.&lt;/p&gt;

&lt;pre&gt;
1010 - 110 = 100    --&amp;gt; the second bit is one
100 - 11 = 1        --&amp;gt; the first bit is one
1 - ... (no more)
&lt;/pre&gt;

&lt;p&gt;This divison’s time complexity turns to O(log(n)) .&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-dividing-number-without-division&quot;&gt;Java code for dividing number without division&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class DivideWithoutDivisionNorMod {
    static int divide(int dividend, int divisor) {
        if (divisor == 0) { return Integer.MAX_VALUE; }
        if (dividend == divisor) { return 1; }
        if (divisor == -1 &amp;amp;&amp;amp; dividend == Integer.MIN_VALUE) { return Integer.MAX_VALUE; }


        long m = (long)dividend;
        long n = (long)divisor;

        int sign = 0;
        if ((m &amp;gt; 0 &amp;amp;&amp;amp; n &amp;gt; 0) || (m &amp;lt; 0 &amp;amp;&amp;amp; n &amp;lt; 0)) {
            sign = 1;
        } else {
            sign = -1;
        }

        m = Math.abs(m);
        n = Math.abs(n);

        int count = 1;
        while (n &amp;lt;= m) {
            n &amp;lt;&amp;lt;= 1;
            count &amp;lt;&amp;lt;= 1;
        }

        n &amp;gt;&amp;gt;= 1;
        count &amp;gt;&amp;gt;= 1;

        long result = 0;
        while (count != 0) {
            if (m &amp;gt;= n) {
                m -= n;
                result |= count;
            }
            count &amp;gt;&amp;gt;= 1;
            n &amp;gt;&amp;gt;= 1;

        }
        return (int)result * sign;
    }
    public static void main(String[] args) {
        System.out.println(divide(10, -3));
        System.out.println(divide(98765, 432));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/a5b99980f553e67d5280767b46c559d1.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;
-3
228
&lt;/pre&gt;

&lt;h4 id=&quot;problem-description---impelemnt-power&quot;&gt;Problem Description - Impelemnt Power&lt;/h4&gt;

&lt;p&gt;Given two integers, x and y, implmenet a function (method) to
calculate &lt;code class=&quot;highlighter-rouge&quot;&gt;x ^ y&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I believe every computer language provides a way to
calculate a power out of the box.
However, the problem asks the implementation without using such
existing feature.&lt;/p&gt;

&lt;h4 id=&quot;the-idea-to-construct-fromto-a-string-with-markers&quot;&gt;The idea to construct from/to a string with markers&lt;/h4&gt;

&lt;p&gt;Also, there’s a simple solution.
Repeating multiplication y times gives me the answer.
The perfomrance of this simple solution will be O(n) (n = y).&lt;/p&gt;

&lt;p&gt;There’s a way to improve this.&lt;/p&gt;

&lt;p&gt;The improvied version calculates &lt;code class=&quot;highlighter-rouge&quot;&gt;x ^ (y / 2)&lt;/code&gt; recursively.
While returning, calcuate &lt;code class=&quot;highlighter-rouge&quot;&gt;(x ^ (y / 2)) * (x ^ (y / 2))&lt;/code&gt;.
If y is odd, multiply x.&lt;/p&gt;

&lt;pre&gt;

y is even:   y = 2n

x ^ y = x ^ (2n) = (x ^ n) * (x ^ n)

y is odd:    y = 2n + 1

x ^ y = x ^ (2n + 1) = x * x ^ (2n) = x * (x ^ n) * (x ^ n)

&lt;/pre&gt;

&lt;p&gt;This way, the time complexity goes down to O(log(n)).&lt;/p&gt;

&lt;h4 id=&quot;java-code-for-constructing-a-binary-tree-from-a-string-with-markers&quot;&gt;Java code for constructing a binary tree from a string with markers&lt;/h4&gt;

&lt;noscript&gt;&lt;pre&gt;public class PowerImpl {
    static int power(int x, int y) {
        // base case
        if (y == 0) {
            return 1;
        }
        int temp = power(x, y / 2);
        if (y % 2 == 0) {
            return temp * temp;
        } else {
            return x * temp * temp;
        }
    }

    public static void main(String[] args) {
        System.out.println(power(2, 10));
        System.out.println(power(-2, 9));
    }
}&lt;/pre&gt;&lt;/noscript&gt;
&lt;script src=&quot;https://gist.github.com/yokolet/1a6f1312a9172cebdac33f5edaa6f50f.js&quot;&gt; &lt;/script&gt;

&lt;p&gt;The result is:&lt;/p&gt;

&lt;pre&gt;
1024
-512
&lt;/pre&gt;

&lt;h4 id=&quot;resources&quot;&gt;Resources&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://qa.geeksforgeeks.org/3794/divide-integers-without-multiplication-division-operator&quot;&gt;Divide two integers without using multiplication, division and mod operator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5386377/division-without-using&quot;&gt;Division without using ‘/’&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2014/05/leetcode-divide-two-integers-java/&quot;&gt;Divide Two Integers&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.geeksforgeeks.org/write-a-c-program-to-calculate-powxn/&quot;&gt;Write a program to cslculate pow(x, n)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.programcreek.com/2012/12/leetcode-powx-n/&quot;&gt;Pow(x, n)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">Division/Power Without Exact Operators</summary></entry></feed>